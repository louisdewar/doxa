name: doxa_adm
about: Admin CLI for Doxa.
args:
  - database_url:
      short: d
      long: database
      value_name: URL
      about: Sets the database URL, if not set then it will default to the value of the environment variable DATABASE_URL
        (this search will look for a .env file).
      takes_value: true
subcommands:
  - invite:
      about: For managing invites
      subcommands:
        - list:
            about: Lists all invites
        - create:
            about: Creates an invite
            args:
              - EXPIRES_AT:
                  short: e
                  long: expires
                  takes_value: true
                  about: |
                    When the invite expires. This accepts times in a human friendly format
                    e.g. "14 days" or "14d" or "14m" (for 14 minutes), "12M10m" (12 months and 10 minutes).
              - USERNAME:
                  short: u
                  long: username
                  takes_value: true
                  about: Mandate a particular username
              - ENROLLMENTS:
                  short: c
                  long: enroll
                  multiple_occurrences: true
                  takes_value: true
                  about: Specifies a list of name of competitions to try to enroll the user in when they create an account.
  - user:
      about: Management of users
      subcommands:
        - list:
            about: Prints out a list of users
        - admin:
            about: For managing admin users
            subcommands:
              - list:
                  about: Prints out a list of admins
              - promote:
                  about: Makes a user an admin by their username
                  args:
                    - USERNAME:
                        about: The username to promote to admin
                        required: true
                        index: 1
              - demote:
                  about: Demotes an admin to an ordinary user by their username
                  args:
                    - USERNAME:
                        about: The username to demote from admin
                        required: true
                        index: 1
  - competition:
      about: Management of competitions
      subcommands:
        - list:
            about: Prints out a list of competitions
        - create:
            about: Creates a competition
            args:
              - COMPETITION_NAME:
                  about: The name of the competition to create
                  required: true
                  index: 1
              - ENSURE_EXISTS:
                  long: ensure-exists
                  about: if set, it is not considered an error if the competition already exists
        - enroll:
            about: Enrolls a user in a competition
            args:
              - USERNAME:
                  about: The username to enroll
                  required: true
                  index: 1
              - COMPETITION:
                  about: The competition to enroll the user in
                  required: true
                  index: 2
        - unenroll:
            about: Unenrolls a user from a competition
            args:
              - USERNAME:
                  about: The username to unenroll
                  required: true
                  index: 1
              - COMPETITION:
                  about: The competition from which the user is being unenrolled
                  required: true
                  index: 2
        - list_user_enrollments:
            about: List the competitions that a particular user is enrolled in
            args:
              - USERNAME:
                  about: The username of the user whose enrollments you want to be listed
                  required: true
                  index: 1
        - list_competition_enrollments:
            about: List the uers that are enrolled in a particular competition
            args:
              - COMPETITION:
                  about: The name of the competition
                  required: true
                  index: 1
  - agent:
      about: Management of agents
      subcommands:
        - list:
            about: Prints out a list of agents belonging to a particular user in a particular competition
            args:
              - USERNAME:
                  about: The name of the user
                  required: true
                  index: 1
              - COMPETITION:
                  about: The name of the competition
                  required: true
                  index: 2

